import{r as s,bK as v,a8 as c,j as p}from"./sanity-cf546c8f.js";function f(r){const{channel:t,draft:e,published:n,livePreviewEnabled:l}=r,[i,a]=s.useState(e),[o,u]=s.useState(n);return s.useEffect(()=>{(i==null?void 0:i._rev)!==(e==null?void 0:e._rev)&&(s.startTransition(()=>a(e)),e&&(t==null||t.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:l,document:d(e)}))),(o==null?void 0:o._rev)!==(n==null?void 0:n._rev)&&(s.startTransition(()=>u(n)),n&&(t==null||t.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:l,document:d(n)})))},[t,e,l,i==null?void 0:i._rev,o==null?void 0:o._rev,n]),null}function d(r){const{_id:t,_type:e,_rev:n,slug:l}=r;return{_id:t,_type:e,_rev:n,slug:l}}var m=s.memo(function(r){const{channel:t,type:e,previewKitConnection:n,loadersConnection:l}=r,i=s.useMemo(()=>v(r.id),[r.id]),{draft:a,published:o,ready:u}=c(i,e,"low");return u&&a||o?p.jsx(f,{channel:t,draft:a,livePreviewEnabled:n==="connected"||l==="connected",published:o},i):null});export{m as default};
